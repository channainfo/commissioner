<% content_for :page_title do %>
  <%= Spree.t(:new_import_order) %>
<% end %>

<% content_for :page_title_small do %>
  <ul class="mt-3 list-group text-muted h6">
    <p><strong class="text-danger">Required columns:</strong> order_channel, order_email, order_phone_number, variant_sku</p>
    <p><strong>Supported file formats:</strong> CSV</p>
    <p>
      <strong>Available guest attributes:</strong>
      <%= SpreeCmCommissioner::Guest.csv_importable_columns %>
    </p>
    <p>
      <strong>Gender: </strong>
      <%= SpreeCmCommissioner::Guest.genders.keys.map(&:to_s) %>
    </p>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>order_channel</th>
          <th>variant_sku</th>
          <% SpreeCmCommissioner::Guest.csv_importable_columns.each do |column| %>
            <th class="text-lowercase"><%= column %></th>
          <% end %>
        </tr>
      </thead>
      <tbody>
          <tr>
            <td>google_form</td>
            <td>ticket-sku</td>
          <% SpreeCmCommissioner::Guest.csv_importable_columns.each do |column| %>
            <td>
              <% case column %>
              <% when :first_name %>
                John
              <% when :last_name %>
                Doe
              <% when :age %>
                30
              <% when :dob %>
                <%= Date.new(1993, 2, 24).strftime("%Y-%m-%d") %>
              <% when :gender %>
                Male
              <% when :other_occupation %>
                Freelancer
              <% when :event_id %>
                2
              <% when :entry_type %>
                General Admission
              <% when :nationality_id %>
                3
              <% when :other_organization %>
                Independent
              <% when :expectation %>
                Networking
              <% when :emergency_contact %>
                Jane Doe, 555-1234
              <% else %>
                Example
              <% end %>
            </td>
          <% end %>
        </tr>
      </tbody>
    </table>
  </ul>
<% end %>

<%= form_with model: @object, url: { action: 'create' }, html: { multipart: true } do |f| %>
  <fieldset data-hook="new_import_order">
    <%= render partial: 'form', locals: { f: f } %>
    <%= render partial: 'spree/admin/shared/new_resource_links' %>
  </fieldset>
<% end %>
